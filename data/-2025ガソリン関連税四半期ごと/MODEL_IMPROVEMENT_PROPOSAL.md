# ガソリン需要関数モデル改修提案

## 📋 問題点の整理

### 1. 消費税率の変遷がモデルに反映されていない
- **現状**: 従量税（53.8円/L）のみを`Tax_rate`として使用
- **問題**: 消費税率の変更（3%→5%→8%→10%）による実質的な価格変化が誤差項や価格弾力性に組み込まれる
- **影響**: 推定が歪む可能性

### 2. 石油石炭税の欠落
- **現状**: 揮発油税・地方揮発油税のみを考慮
- **問題**: 石油石炭税（2.8円/L）が含まれていない
- **影響**: 総税額の過小評価

## ✅ 実施済みのデータ拡張

### 追加されたカラム（`gasoline_tax_quarterly.csv`）

1. **`石油石炭税_円L`**
   - 2003年Q4以前: 0.0円/L
   - 2003年Q4〜2012年Q3: 2.04円/L
   - 2012年Q4〜: 2.8円/L（地球温暖化対策税上乗せ後）

2. **`合計従量税率_円L`**
   - 揮発油税（本則+暫定）+ 地方揮発油税（本則+暫定）+ 石油石炭税
   - 全ての従量税の合計

3. **`実効従量税率_円L`**
   - 合計従量税率 × (1 + 消費税率/100)
   - 二重課税（従量税に消費税がかかる）を考慮

4. **`消費税率_%`**
   - 1989年Q1以前: 0.0%
   - 1989年Q2〜1997年Q1: 3.0%
   - 1997年Q2〜2014年Q1: 5.0%
   - 2014年Q2〜2019年Q3: 8.0%
   - 2019年Q4〜: 10.0%

## 🔧 推奨モデル改修案

### 案1: 統合アプローチ（推奨）

**モデル式**:
```
ΔlnQ = α×ΔlnGDP + β×ΔlnP_tax_excluded + γ×Δln(Effective_Specific_Tax) + δ×Δln(Consumption_Tax_Rate) + ε
```

**変数の定義**:
- `P_tax_excluded`: 税抜き価格 = 税込み価格 / (1 + 消費税率/100)
- `Effective_Specific_Tax`: 実効従量税率（`実効従量税率_円L`を使用）
- `Consumption_Tax_Rate`: 消費税率（`消費税率_%`を使用）

**メリット**:
- 消費税率の効果を独立変数として分離
- 従量税と消費税の効果を分離して推定可能
- 解釈が明確

### 案2: 簡易アプローチ

**モデル式**:
```
ΔlnQ = α×ΔlnGDP + β×ΔlnP_real + γ×Δln(Total_Specific_Tax) + δ×Dummy_Consumption_Tax_Change + ε
```

**変数の定義**:
- `P_real`: 実質価格 = 税込み価格 / (1 + 消費税率/100)
- `Total_Specific_Tax`: 合計従量税率（`合計従量税率_円L`を使用）
- `Dummy_Consumption_Tax_Change`: 消費税率変更ダミー（3%→5%、5%→8%、8%→10%）

**メリット**:
- 実装が比較的容易
- 消費税率変更のショック効果を捕捉

### 案3: 段階的アプローチ

**ステップ1**: まず石油石炭税を含めた従量税率を使用
```
ΔlnQ = α×ΔlnGDP + β×ΔlnP + γ×Δln(Total_Specific_Tax) + ε
```

**ステップ2**: 消費税率を独立変数として追加
```
ΔlnQ = α×ΔlnGDP + β×ΔlnP + γ×Δln(Total_Specific_Tax) + δ×Δln(Consumption_Tax_Rate) + ε
```

**ステップ3**: 実効税率を使用（二重課税考慮）
```
ΔlnQ = α×ΔlnGDP + β×ΔlnP_tax_excluded + γ×Δln(Effective_Specific_Tax) + δ×Δln(Consumption_Tax_Rate) + ε
```

## 📊 データマージ方法

### `sample_demand_regression_data.csv`との統合

1. **年次データのマージ**
   - `gasoline_tax_quarterly.csv`から年次平均を計算
   - または、各年のQ2（4-6月）のデータを使用

2. **必要な変数の追加**
   - `合計従量税率_円L`
   - `実効従量税率_円L`
   - `消費税率_%`

3. **税抜き価格の計算**
   - `P_tax_excluded = P / (1 + 消費税率/100)`

## 🔍 検証項目

1. **モデルの適合度改善**
   - R²の向上
   - 残差の改善

2. **係数の解釈**
   - 価格弾力性（β）の変化
   - 税率弾力性（γ）の変化
   - 消費税率の効果（δ）

3. **統計的有意性**
   - 各係数のP値
   - モデル全体のF統計量

## 📝 実装チェックリスト

- [x] 石油石炭税の追加
- [x] 合計従量税率の計算
- [x] 実効従量税率の計算（二重課税考慮）
- [x] 消費税率の追加
- [ ] `sample_demand_regression_data.csv`とのマージ
- [ ] `main.py`のモデル改修
- [ ] 回帰分析の再実行
- [ ] 結果の比較・検証

## 📚 参考資料

- 財務省: 自動車関係諸税・エネルギー関係諸税に関する資料
- 第一生命経済研究所: 暫定税率とはなにか -歴史的経緯と今後の課題-
- 石油連盟: 石油に係る様々な税金

