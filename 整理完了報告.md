# フォルダ整理完了報告

## 整理日時
2025年11月26日

## 削除したファイル・フォルダ

### 1. 古い分析スクリプト
- `analysis/01_estimate_demand_function.py` (差分モデル版)
- `analysis/01_estimate_demand_function_level_model.py` (四半期レベルモデル版)

### 2. 古い結果ファイル
- `analysis/results/01_coefficients.json`
- `analysis/results/01_coefficients_level_model.json`
- `analysis/results/01_demand_function_coefficients.csv`
- `analysis/results/01_demand_function_coefficients_level_model.csv`
- `analysis/results/01_analysis_data.csv`
- `analysis/results/01_analysis_data_level_model.csv`
- `analysis/demand_regression_data_log_transformed.csv` (四半期版)

### 3. アーカイブフォルダ全体
- `archive/` フォルダ全体（古いコード、テストファイルなど）

### 4. data/内のスクリプトファイル
- `data/-2025ガソリン関連税四半期ごと/add_petroleum_coal_tax.py`
- `data/-2025ガソリン関連税四半期ごと/fix_precision.py`
- `data/-2025ガソリン関連税四半期ごと/verify_data.py`
- `data/-2025ガソリン関連税四半期ごと/MODEL_IMPROVEMENT_PROPOSAL.md`

## 残した現行コード

### データ準備スクリプト (`scripts/data_preparation/`)
- `00_prepare_log_transformed_data.py` - 対数変換データ準備
- `02_complete_consumption_data.py` - 消費量データ補完
- `03_fix_units.py` - 単位統一
- `04_process_cpi_data.py` - CPIデータ処理
- `05_add_cpi_and_relative_price.py` - CPIと相対価格の追加
- `06_aggregate_to_annual_data.py` - 年次データ集約
- `07_prepare_annual_log_transformed_data.py` - 年次データ対数変換
- `add_gdp_data.py` - GDPデータ追加
- `add_price_data_1990.py` - 価格データ追加
- `add_tax_rate_data.py` - 税率データ追加
- `README.md` - データ準備スクリプトの説明

### 分析スクリプト (`analysis/`)
- `01_estimate_demand_function_annual_level_model.py` - **最新版: 年次データ・レベルモデル推定**
- `02_calculate_consumer_surplus.py` - 消費者余剰計算
- `03_visualize_results.py` - 結果可視化

### 可視化スクリプト (`visualization/`)
- `01_create_raw_data_visualizations.py` - 生データ可視化

### 分析結果 (`analysis/results/`)
- `01_coefficients_annual_level_model.json` - **最新版: 年次データ推定結果（R²=93.9%）**
- `01_analysis_data_annual_level_model.csv` - **最新版: 年次データ分析用データ**
- `01_demand_function_coefficients_annual_level_model.csv` - **最新版: 係数結果**
- `02_consumer_surplus_results.csv` - 消費者余剰計算結果

### データファイル
- `demand_regression_data_raw.csv` - 元データ（四半期）
- `demand_regression_data_annual.csv` - 年次データ
- `analysis/demand_regression_data_annual_log_transformed.csv` - 年次データ対数変換版

### プロジェクトファイル
- `project/前年度提出論文_コピペ.text` - 前年度論文
- `project/学士論文メモ.text` - 学士論文メモ（最新結果含む）

### ドキュメント
- `README.md` - プロジェクト概要
- `スクリプト・結果.md` - スクリプトと結果の説明
- `プラン.md` - データ収集計画
- `整理内容.md` - 過去の整理内容
- `GDPデータ取得方法.md` - GDPデータ取得方法
- `消費者物価指数データ取得方法.md` - CPIデータ取得方法
- `消費者余剰測定方法まとめ/` - 測定方法のドキュメント

## 整理後のフォルダ構造

```
forReaserch/
├── analysis/                    # 分析スクリプトと結果
│   ├── 01_estimate_demand_function_annual_level_model.py  # 最新版
│   ├── 02_calculate_consumer_surplus.py
│   ├── 03_visualize_results.py
│   ├── demand_regression_data_annual_log_transformed.csv
│   ├── figures/                # グラフ
│   └── results/                # 分析結果（最新版のみ）
│       ├── 01_coefficients_annual_level_model.json
│       ├── 01_analysis_data_annual_level_model.csv
│       ├── 01_demand_function_coefficients_annual_level_model.csv
│       └── 02_consumer_surplus_results.csv
├── data/                       # データファイル
│   ├── -2025ガソリン関連税四半期ごと/
│   ├── -2025消費者物価指数/
│   ├── 1990-2025_ガソリン小売価格四半期ごと/
│   ├── 1994-2025_GDP四半期ごと/
│   └── 2007-2024ガソリン販売量/
├── scripts/                    # データ準備スクリプト
│   └── data_preparation/
│       ├── 00_prepare_log_transformed_data.py
│       ├── 02_complete_consumption_data.py
│       ├── 03_fix_units.py
│       ├── 04_process_cpi_data.py
│       ├── 05_add_cpi_and_relative_price.py
│       ├── 06_aggregate_to_annual_data.py
│       ├── 07_prepare_annual_log_transformed_data.py
│       ├── add_gdp_data.py
│       ├── add_price_data_1990.py
│       ├── add_tax_rate_data.py
│       └── README.md
├── visualization/              # 可視化スクリプト
│   ├── 01_create_raw_data_visualizations.py
│   └── figures/
├── project/                    # プロジェクトメモ
│   ├── 前年度提出論文_コピペ.text
│   └── 学士論文メモ.text
├── 消費者余剰測定方法まとめ/   # 測定方法ドキュメント
├── demand_regression_data_raw.csv      # 元データ
├── demand_regression_data_annual.csv   # 年次データ
├── README.md
├── スクリプト・結果.md
├── プラン.md
├── 整理内容.md
├── GDPデータ取得方法.md
└── 消費者物価指数データ取得方法.md
```

## 現行の分析フロー

1. **データ準備** (`scripts/data_preparation/`)
   - 各データソースからデータを統合
   - 単位統一、欠損値処理
   - CPIと相対価格の計算
   - 年次データへの集約

2. **分析** (`analysis/`)
   - `01_estimate_demand_function_annual_level_model.py`: 年次データでレベルモデル推定（R²=93.9%）
   - `02_calculate_consumer_surplus.py`: 消費者余剰計算
   - `03_visualize_results.py`: 結果可視化

3. **結果** (`analysis/results/`)
   - 年次データ版の推定結果のみ保持

## 注意事項

- 古いバージョンのスクリプトや結果ファイルは削除済み
- 現行のコードのみが残っています
- 最新の分析結果は年次データ版（R²=93.9%）です

